{{ if (isset .Get "src") }}
{{ $imagewidth := cond (isset .Get "width") (.Get "width") "100%" }}
{{ $imagesrc := (.Get "src") }}
{{ $imagecaption := cond (isset .Get "caption") (.Get "caption") "No caption" }}
<figure class="post-figure" data-width="{{$imagewidth}}">
    <img src="{{$imagesrc}}" alt="{{$imagecaption}}">
    <figcaption>{{$imagecaption}}</figcaption>
</figure>
{{ end }}
